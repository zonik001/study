<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        function test(){
            var arr = [];
            for(var i = 0; i < 10; i ++){
                arr[i] = function() {
                    document.write(i + " ");
                    // 为什么输出结果都是10？ 循环跑完之后 i = 10并存放在函数test的作用域链中，而函数在
                    // 为什么输出数字都一样？ 
                }
            }
            return arr;
        }
        var myarr = test();
        for(var j = 0; j < 10; j ++){
            myarr[j]();
        }

        // // 以前解决闭包问题的唯一方式
        // function test(){
        //     var arr = [];
        //     for(var i = 0; i < 10; i ++){
        //         // 利用这个立即执行函数 读到function(z)立即执行
        //         (function (z){
        //             // 为什么function
        //             arr[z] = function (){
        //                 document.write(z + " ");
        //             }
        //         }(i)) //将i作为立即执行函数的实参传入，再用z进行中转
        //     }
        //     return arr;
        // }
        // var myarr = test();
        // for(var j = 0; j < 10; j ++){
        //     myarr[j]();
        // }

        // function test() {
        //     var arr = [];
        //     // 果然可以用let ，直接就没闭包的事了
        //     // const好像不太行 why？
        //     for(let i = 0; i < 10; i ++){
        //         arr[i] = function (){
        //             document.write(i + " ");
        //         }
        //     }
        //     // 为什么不能返回数组中的某个值呢？
        //     return arr;
        // }
        // var myarr = test();  
        // for(let j = 0; j < 10; j ++){
        //     myarr[j]();
        // }
    </script>
</body>
</html>