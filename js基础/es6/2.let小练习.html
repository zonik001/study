<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .clearfix::after {
            content: "";
            display: block;
            clear: both;
        }

        .container {
            width: 300px;
            height: 300px;
        }

        .item {
            float: left;
            width: 30px;
            height: 15px;
            border: 1px solid #008c8c;
            margin-left: 10px;
        }

        .item1 {
            float: left;
            width: 30px;
            height: 15px;
            border: 1px solid #008c8c;
            margin-left: 10px;
        }
    </style>
</head>

<body>
    <div class="container ">
        <h2 class="titile">用let声明变量 点击切换颜色</h2>
        <div class="item">1</div>
        <div class="item">2</div>
        <div class="item">3</div>
    </div>
    <div class="container1 ">
        <h2 class="titile1">闭包解决</h2>
        <div class="item1">11</div>
        <div class="item1">22</div>
        <div class="item1">33</div>
    </div>
    <script>
        let item = document.getElementsByClassName('item');
        let clickNum = 1;
        // 外层for循环是为了给每个item绑定点击事件， 然点击事件是异步任务，for此时已经执行完了（用var声明的话，i的值已经为3了）
        for (let i = 0; i < 3; i++) {
            item[i].onclick = function () {
                console.log(this)
                if(clickNum == 1){
                    item[i].style.backgroundColor = 'red';  
                }else{
                    item[i].style.backgroundColor = 'yellow';  
                }
                clickNum += 1;
            }
        }
        //     var 声明的变量作用于全局 循环结束后执行最后一次 ++ 值为3
        // console.log(window.i)  //3

        // 只在此代码块生效代码  上面代码相当于下
        // {
        //     let i = 0;
        //     item[0].onclick = function() {
        //         item[0].style.backgroundColor = 'red';
        //     }
        // }
        // {
        //     let i = 1;
        //     item[1].onclick = function() {
        //         item[1].style.backgroundColor = 'red';
        //     }
        // }
        // {
        //     let i = 2;
        //     item[2].onclick = function() {
        //         item[2].style.backgroundColor = 'red';
        //     }
        // }



        // 用var声明 this指向
        let item1 = document.getElementsByClassName('item1');
        for (var i = 0; i < 3; i++) {
            item1[i].onclick = function() {
                this.style.backgroundColor = 'pink';
                console.log(this)
                // item1[i].style.backgroundColor = 'pink'; //此时i的值为3
            }
        }
    </script>
</body>

</html>